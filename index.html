<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, scissors</title>
</head>

<body>
    <script>
        let cpuChoice;
        let playerChoice;
        let roundWin;
        let playerScore;
        let cpuScore;
        let roundCounter;

        function getRandomInt() {
            return Math.floor(Math.random() * 3);       // Get number between 0 and 2
        }

        function cpuPlay() {
            cpuChoice = getRandomInt()

            if (cpuChoice === 0) {                      // convert numbers into strings for easier reading
                return cpuChoice = 'rock';                  // and to plug into other strings later
            } else if (cpuChoice === 1) {
                return cpuChoice = 'paper';
            } else if (cpuChoice === 2) {
                return cpuChoice = 'scissors';
            }
        }

        function playRound(playerChoice, cpuChoice) {   // one round of janken
            playerChoice = prompt('Rock, paper, or scissors?');
            playerChoice = playerChoice.toLowerCase();  // for case insensitivity

            cpuChoice = cpuPlay();
            console.log(`You chose ${playerChoice}. The computer chose ${cpuChoice}.`);

            switch (playerChoice) {                     // comparing playerChoice to cpuChoice
                case 'rock':
                    if (cpuChoice === 'rock') {
                        return roundWin = 'draw'        // chose a string because it shows up as different
                    } else if (cpuChoice === 'paper') {     // from bools in a strict equality test
                        return roundWin = false;            // elegant? noooooo. indicative of experience? nooooo.
                    } else if (cpuChoice === 'scissors') {  // works for this program? just about.
                        return roundWin = true;
                    }
                    break;
                case 'paper':
                    if (cpuChoice === 'rock') {
                        return roundWin = true;
                    } else if (cpuChoice === 'paper') {
                        return roundWin = 'draw'
                    } else if (cpuChoice === 'scissors') {
                        return roundWin = false;
                    }
                    break;
                case 'scissors':
                    if (cpuChoice === 'rock') {
                        return roundWin = false;
                    } else if (cpuChoice === 'paper') {
                        return roundWin = true;
                    } else if (cpuChoice === 'scissors') {
                        return roundWin = 'draw';
                    }
                    break;
                default:
                    return 'error'
                    break;
            }
        }

        function game() {
            playerScore = 0;
            cpuScore = 0;
            roundCounter = 0;

            while (roundCounter < 5) {                             // five rounds
                playRound()

                if (roundWin === true) {
                    console.log('You win this round!');
                    ++playerScore;
                    roundCounter++;
                } else if (roundWin === false) {
                    console.log('You lose this round.');
                    ++cpuScore;
                    roundCounter++;
                } else if (roundWin === 'draw') {
                    console.log('This round was a draw. Try again!')
                } else {
                    console.log('Wait... what happened?')
                }

                console.log(`Your score is ${playerScore} and the computer's score is ${cpuScore}.`);
            }

            if (playerScore > cpuScore) {
                console.log('You win the game! Amazing!')
            } else if (playerScore < cpuScore) {
                console.log('You lost the game. Better luck next time!')
            } else {
                console.log('Wait... what happened?')
            }
        }
    </script>
</body>

</html>